# PhoneBook
## Описание
Данный проект представляет из себя телефонную книгу. Используя командную строку вы можете добавить, изменить, найти, просмотреть запись(записи) из .txt файла.
<details>
<summary>ТЗ проекта ↓</summary>
Реализовать телефонный справочник со следующими возможностями:

1. Вывод постранично записей из справочника на экран
2. Добавление новой записи в справочник
3. Возможность редактирования записей в справочнике
4. Поиск записей по одной или нескольким характеристикам

Требования к программе:
1. Реализация интерфейса через консоль (без веб- или графического интерфейса)
2. Хранение данных должно быть организовано в виде текстового файла, формат которого придумывает сам программист
3. В справочнике хранится следующая информация: фамилия, имя, отчество, название организации, телефон рабочий, телефон личный (сотовый)

Плюсом будет:
1. аннотирование функций и переменных
2. документирование функций
3. подробно описанный функционал программы
4. размещение готовой программы и примера файла с данными на github
</details>

## Используемые технологии
![AppVeyor](https://img.shields.io/badge/Python-3.11-green)
![AppVeyor](https://img.shields.io/badge/pydantic-2.2.1-9cf)
![AppVeyor](https://img.shields.io/badge/pytest-7.4.0-9cf)

![AppVeyor](https://img.shields.io/badge/Poetry-1.5.1-green)

## Запуск
1. Клонируем репозиторий:
   ```bash
   git clone https://github.com/Timoha23/EM_test_task.git
   ```
2. Переходим в директорию src:
    ```bash
    cd src/
    ```
3. Устанавливаем зависимости:
   ```bash
   poetry install
   ```

## Примеры использования программы
Все команды исполняются из директории src
1. Добавление записи
    
    * Команда:
        ```bash
        python main.py add_entry
        ```
    * Далее будет предложено поочередно ввести данные:
        ```bash
        $ python main.py add_entry
        Введите имя: Ivan
        Введите фамилию: Ivanov
        Введите отчество: Ivanovich
        Введите организацию: OOO
        Введите рабочий телефон: +71234567890
        Введите личный телефон: +71234567890
        Запись успешно добавлена.
        ```
    * После запись будет добавлена в файл phonebook.txt (изменить название данного файла вы можете в settings.py).

2. Показать все записи:
    * Команда:
        ```bash
        python main.py show_entries
        ```
    * Результат:
        ```bash
        ...
        ID: 7
        Имя: Ivan
        Фамилия: Ivanov
        Отчество: Ivanovich
        Организация: OOO
        Рабочий телефон: +71234567890
        Личный телефон: +71234567890

        ID: 8
        Имя: Oleg
        Фамилия: Ivanov
        Отчество: Ivanovich
        Организация: OOO
        Рабочий телефон: +71234567890
        Личный телефон: +71234567890

        ID: 9
        Имя: Ivan
        Фамилия: Ivanov
        Отчество: Ivanovich
        Организация: OOO
        Рабочий телефон: +71234567890
        Личный телефон: +71234567890

        ID: 10
        Имя: Oleg
        Фамилия: Ivanov
        Отчество: Ivanovich
        Организация: OOO
        Рабочий телефон: +71234567890
        Личный телефон: +71234567890

        Нажмите клавишу Enter для вывода следующих записей...
        ```

3. Найти запись:
    * Команда:
        ```bash
        python main.py find_entry
        ```
    * Далее будет предложено ввести параметры для поиска (возможен поиск по одному, либо нескольким параметрам), например введем такие:
        ```json
        {"id": 1, "office_phone": "+71234567890"}
        ```
    * Результат:
        ```bash
        $ python main.py find_entry   
        Введите данные в формате json
        Пример ввода данных: {"id": 1, "first_name": "Ivan", "office_phone": "+71234567890", "personal_phone": null}
        Примечание: можно искать по любому параметру: {"id": 1, "office_phone": "+71234567890"}
        По вашему запросу найдено 1 записей.
        ID: 1
        Имя: Ivan
        Фамилия: Ivanov
        Отчество: Ivanovich
        Организация: OOO
        Рабочий телефон: +71234567890
        Личный телефон: +71234567890
        ```
4. Изменить запись:
    * Команда edit_entry:
        ```bash
        python main.py edit_entry
        ```
    * Далее будет предложено ввести ID записи, и данные которые мы хотим изменить:
        ```bash
        $ python main.py edit_entry
        Введите ID записи для редактирования: 1
        Введите данные в формате json: {"first_name": "Petr", "personal_phone": "89999999999"}
        Запись успешно обновлена.
        ```

5. Если команда, которую вы ввели не найдена, то вы увидите следующее сообщение:
    ```bash
    $ python main.py unknown_command
    Команда не найдена. Список доступных команд:
    add_entry - Добавить запись
    show_entries - Показать записи
    find_entry - Найти запись
    edit_entry - Изменить запись
    ```

## Про хранение
Данные хранятся в файле phonebook.txt. Хранятся данные построчно следующим образом:
```txt
{"id":1,"first_name":"Petr","last_name":"Ivanov","middle_name":"Ivanovich","organization":"OOO","office_phone":"+71234567890","personal_phone":"89999999999"}
{"id":2,"first_name":"Oleg","last_name":"Ivanov","middle_name":"Ivanovich","organization":"OOO","office_phone":"+71234567890","personal_phone":"+71234567890"}
```
Для каждой записи выделена отдельная строка. Не рекомендуется изменять записи в файле в ручную, так как это может привести к сбоям работы программы.
